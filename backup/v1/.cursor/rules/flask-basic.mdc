---
name: flask-basic.mdc
description: Flask basic rules for Cursor IDE
globs:
  - "**/*.py"
  - "**/web/**"
---

# Flask Basic Rules

## Application Factory Pattern
- Always use application factory pattern (`create_app()`) for Flask apps
- Register blueprints inside `create_app()` function
- Use `current_app` for accessing app context in blueprints

## Error Handling
- Use custom exception classes for application errors
- Register error handlers using `@app.errorhandler()`
- Return JSON responses for API endpoints
- Log errors with appropriate level and context

## Configuration
- Use environment variables for sensitive data
- Separate config classes for different environments (Dev, Prod)
- Load configuration from YAML files with environment overrides
- Validate configuration structure on load

## Blueprints
- Organize routes in blueprints by feature/domain
- Use clear URL prefixes for blueprints
- Keep blueprints focused on single responsibility

## Type Hints
- Use type hints for all function parameters and return values
- Use `Optional[T]` for nullable types
- Use `str | Path` for flexible path types (Python 3.10+)

## Request Validation
- Use Marshmallow schemas for request validation
- Validate early with clear error messages
- Return appropriate HTTP status codes

## Security
- Validate and sanitize file paths (prevent directory traversal)
- Validate file extensions and sizes
- Use parameterized queries for database operations
- Sanitize user inputs
